# hybrid

__前言:__ 客户端和前端混合开发，出现背景在移动端占了大部分流量。另外像很多app像微信，淘宝等等里面都含有很多的前端代码（公众号，朋友圈）。

* hybrid是什么？

``` txt
    hybrid即“混合”，前端和客户端的混合开发，也因此相对H5会比较快。（含web-view)

```

* hybrid的优势？

``` txt
    1、可以快速迭代更新（无需app审核），因为是纯js之类的前端代码；
    2、体验流畅
    3、减少开发与沟通成本，双端共用一套代码
```

* 为何用hybrid？

```txt
体验要求高，变化频繁
```

* 具体实现

```txt
1、前端做好纯前端页面，将文件交给客户端
2、客户端拿到静态页面，以文件形式存储在app中
3、客户端在一个webview中使用file协议加载静态页面
```

* 如何实现静态内容实时更新？

```txt
    每次app打开去服务端对比下载（利用到了版本）最新的包，即客户端去server下载最新的静态文件，我们维护server的静态文件
```

* hybrid更新和上架流程？

```txt
1、服务器的版本和zip包维护
2、更新zip包之前，先对比版本号
3、zip下载解压与覆盖
```

* hybrid和H5的区别？

```txt
hybrid:体验更好几乎和NA一致，快速迭代；但开发成本高，联调，测试debug，运维都比较麻烦。
H5:简单而性能不强，适合单次的运营活动功能
```

* 前端JS和客户端如何通讯？

```txt
1、不用ajax，第一跨域，第二速度慢，所以要客户端获取信息（预取），JS通过通讯拿到内容，进行渲染
2、基本形式：js访问客户端，客户端通过回调函数返回内容。即调用，传参，监听回调
3、前端和客户端的通信协议：举例微信的schema协议
```

* file 协议

```txt
评：标准和协议有点儿重要。。。。
用于加载本地的资源和网页，所以快～，通过控制台network的Request URL来呈现。
规范：'(")file://+绝对路径'(");

```